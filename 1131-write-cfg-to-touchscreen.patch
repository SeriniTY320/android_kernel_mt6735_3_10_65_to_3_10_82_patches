From 6eeab978d5cd224ce9662d7f09f4a8b8e2bf9cba Mon Sep 17 00:00:00 2001
From: olegsvs <oleg.texet@gmail.com>
Date: Sun, 15 May 2016 13:05:33 +0300
Subject: [PATCH 1131/1168] write cfg to touchscreen

---
 .../mediatek/GT915_HD/tpd_custom_gt9xx.h           | 81 ++++++++++------------
 1 file changed, 37 insertions(+), 44 deletions(-)

diff --git a/drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h b/drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h
index f6d7288..53ab998 100755
--- a/drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h
+++ b/drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h
@@ -86,13 +86,14 @@
 #include <linux/jiffies.h>
 
 /* Pre-defined definition */
-#define TPD_KEY_COUNT   3
-#define key_1           120,1500 //1320              //auto define  
-#define key_2           360,1500 //1320
-#define key_3           600,1500 //1320
-
-#define TPD_KEYS        {KEY_MENU, KEY_HOMEPAGE, KEY_BACK}
-#define TPD_KEYS_DIM    {{key_1,60,40},{key_2,60,30},{key_3,60,40}}
+#define TPD_KEY_COUNT   4
+#define key_1           60,850              //auto define  
+#define key_2           180,850
+#define key_3           300,850
+#define key_4           420,850
+
+#define TPD_KEYS        {KEY_BACK, KEY_HOME, KEY_MENU, KEY_SEARCH}
+#define TPD_KEYS_DIM    {{key_1,50,30},{key_2,50,30},{key_3,50,30},{key_4,50,30}}
 extern u16 show_len;
 extern u16 total_len;
 extern u8 gtp_rawdiff_mode;
@@ -113,20 +114,20 @@ extern s32 i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf, in
 extern s32 gtp_i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf, int len);
 
 //***************************PART1:ON/OFF define*******************************
-#define GTP_CUSTOM_CFG        1
+#define GTP_CUSTOM_CFG        0
 #define GTP_DRIVER_SEND_CFG   1       // driver send config to TP in intilization
 #define GTP_HAVE_TOUCH_KEY    1
 #define GTP_POWER_CTRL_SLEEP  0       // turn off/on power on suspend/resume
 
-#define GTP_AUTO_UPDATE       1       // auto updated fw by .bin file
-#define GTP_HEADER_FW_UPDATE  1       // auto updated fw by gtp_default_FW in gt9xx_firmware.h, function together with GTP_AUTO_UDPATE
-#define GTP_AUTO_UPDATE_CFG   1       // auto update config by .cfg file, function together with GTP_AUTO_UPDATE
+#define GTP_AUTO_UPDATE       0       // auto updated fw by .bin file
+#define GTP_HEADER_FW_UPDATE  0       // auto updated fw by gtp_default_FW in gt9xx_firmware.h, function together with GTP_AUTO_UDPATE
+#define GTP_AUTO_UPDATE_CFG   0       // auto update config by .cfg file, function together with GTP_AUTO_UPDATE
 
 #define GTP_SUPPORT_I2C_DMA   0       // if gt9xxf, better enable it if hardware platform supported
 #define GTP_COMPATIBLE_MODE   0       // compatible with GT9XXF
 
 #define GTP_CREATE_WR_NODE    1
-#define GTP_ESD_PROTECT       1       // esd protection with a cycle of 2 seconds
+#define GTP_ESD_PROTECT       0       // esd protection with a cycle of 2 seconds
 #define GTP_CHARGER_SWITCH    0       // charger plugin & plugout detect
 
 #define GTP_WITH_PEN          0      
@@ -134,16 +135,13 @@ extern s32 gtp_i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf
 
 #define GTP_GESTURE_WAKEUP    0 
 
-//#define TPD_PROXIMITY
-#define TPD_HAVE_BUTTON            // report key as coordinate,Vibration feedback
+#define TPD_PROXIMITY
+//#define TPD_HAVE_BUTTON             // report key as coordinate,Vibration feedback
 #define TPD_WARP_X                  // mirrored x coordinate
 #define TPD_WARP_Y                  // mirrored y coordinate
 #define GTP_DEBUG_ON          1
-#define GTP_DEBUG_ARRAY_ON    1
-#define GTP_DEBUG_FUNC_ON     1
-
-
-#define TPD_FILTER_PARA {1, 146} //{enable, pixel density}
+#define GTP_DEBUG_ARRAY_ON    0
+#define GTP_DEBUG_FUNC_ON     0
 
 //***************************PART2:TODO define**********************************
 //STEP_1(REQUIRED):Change config table.
@@ -188,30 +186,25 @@ extern s32 gtp_i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf
 //add clj q33
 
 #define CTP_CFG_GROUP1 {\
-0x45,0xD0,0x02,0x00,0x05,0x05,0x35,0x41,0x01,0x08,\
-0x28,0x0D,0x50,0x3C,0x03,0x00,0x00,0x00,0xFF,0x7F,\
-0x02,0x22,0x05,0x15,0x17,0x1C,0x14,0x8B,0x0A,0x0C,\
-0x30,0x2E,0xF4,0x0A,0x03,0x00,0x00,0x82,0x33,0x11,\
-0x5A,0x00,0x00,0x00,0x00,0x00,0x00,0x0A,0x10,0x00,\
-0x2B,0x23,0x6B,0x94,0xD5,0x02,0x00,0x00,0x00,0x04,\
-0x95,0x27,0x00,0x7E,0x31,0x00,0x6D,0x3D,0x00,0x5F,\
-0x4D,0x00,0x57,0x60,0x00,0x57,0x18,0x38,0x50,0x00,\
-0xFA,0x4A,0x30,0xDD,0xDF,0x39,0x00,0x00,0x00,0x00,\
-0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,\
-0x0F,0x03,0x05,0x10,0x42,0xF8,0x0F,0x19,0x00,0x00,\
-0x4B,0x2D,0x02,0x04,0x06,0x08,0x0A,0x0C,0x0E,0x10,\
-0x12,0x14,0x16,0x18,0xFF,0xFF,0x00,0x00,0x00,0x00,\
+    0x44,0xD0,0x02,0x00,0x05,0x05,0x05,0x01,0x01,0x0F,\
+0x28,0x0F,0x46,0x32,0x03,0x05,0x00,0x00,0xFF,0x7F,\
+0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x8B,0x0B,0x0C,\
+0x28,0x2A,0x0F,0x0A,0x00,0x14,0x00,0x03,0x22,0x1D,\
+0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x32,0x00,0x28,\
+0x7B,0x1E,0x50,0x94,0xC5,0x02,0x07,0x00,0x00,0x04,\
+0x98,0x21,0x00,0x80,0x28,0x00,0x6B,0x31,0x00,0x5B,\
+0x3B,0x00,0x4D,0x48,0x00,0x4D,0x38,0x00,0x00,0x00,\
+0xF0,0x30,0x20,0xFF,0xFF,0x27,0x00,0x32,0x02,0x14,\
+0x1E,0x99,0x1D,0x1E,0x14,0x0F,0x00,0x00,0x01,0x00,\
+0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x19,0x00,0x00,\
+0x46,0x32,0x18,0x16,0x14,0x12,0x10,0x0E,0x0C,0x0A,\
+0x08,0x06,0x04,0x02,0xFF,0xFF,0x00,0x00,0x00,0x00,\
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
-0x00,0x00,0x16,0x24,0x18,0x22,0x1C,0x21,0x1D,0x20,\
-0x1F,0x1E,0x02,0x13,0x04,0x12,0x06,0x10,0x08,0x0F,\
-0x0A,0x0C,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,\
-0x00,0xFA,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,\
-0xAF,0xEE,0xFF,0xFF,0x94,0x00,0x96,0xD1,0xCD,0x3C,\
-0xED,0xDE,0x35,0xF5,0x88,0xE9,0xF6,0xEC,0x99,0xC3,\
-0x80,0xA5,0x8E,0xFE,0x18,0xB9,0xF2,0x8C,0x10,0x81,\
-0x43,0x0B,0x56,0x01,0xDD,0xCA,0xAE,0x54,0x70,0x0F,\
-0xD1,0xA8,0x8F,0x86,0x64,0xCF,0x75,0x0E,0x9B,0x2A,\
-0x59,0x91,0x7F,0xED,0x95,0xFB,0xC3,0x78,0xD0,0xF0\
+0x0A,0x00,0x02,0x04,0x06,0x08,0x0A,0x0C,0x0F,0x10,\
+0x12,0x13,0x16,0x18,0x1C,0x1D,0x1E,0x1F,0x20,0x21,\
+0x22,0x24,0x26,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,\
+0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,\
+0xFF,0xAF,0xFF,0xFF,0x85,0x01 \
     }
 #endif 
 
@@ -284,7 +277,7 @@ extern s32 gtp_i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf
 
 //STEP_4(optional):If this project have touch key,Set touch key config.                                    
 #if GTP_HAVE_TOUCH_KEY
-    #define GTP_KEY_TAB  {KEY_MENU, KEY_HOMEPAGE, KEY_BACK}
+    #define GTP_KEY_TAB  {KEY_FINGER, KEY_HOME, KEY_BACK, KEY_SEND}
 #endif
 
 //***************************PART3:OTHER define*********************************
@@ -294,7 +287,7 @@ extern s32 gtp_i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf
 #define GTP_POLL_TIME               10
 #define GTP_ADDR_LENGTH             2
 #define GTP_CONFIG_MIN_LENGTH       186
-#define GTP_CONFIG_MAX_LENGTH       1000
+#define GTP_CONFIG_MAX_LENGTH       240
 #define FAIL                        0
 #define SUCCESS                     1
 #define SWITCH_OFF                  0
-- 
2.7.4

