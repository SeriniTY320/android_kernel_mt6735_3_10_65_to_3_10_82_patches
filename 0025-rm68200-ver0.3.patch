From 4a4f258730cbaca51325078a3fb23c444ba9722f Mon Sep 17 00:00:00 2001
From: olegsvs <oleg.texet@gmail.com>
Date: Mon, 9 May 2016 21:58:02 +0300
Subject: [PATCH 025/117] rm68200 ver0.3

---
 .../rm68200_6735_dsi_video.c                       | 563 ++++++---------------
 include/generated/compile.h                        |   4 +-
 2 files changed, 168 insertions(+), 399 deletions(-)

diff --git a/drivers/misc/mediatek/lcm/rm68200_6735_dsi_video/rm68200_6735_dsi_video.c b/drivers/misc/mediatek/lcm/rm68200_6735_dsi_video/rm68200_6735_dsi_video.c
index 83857f3..880ef6b 100644
--- a/drivers/misc/mediatek/lcm/rm68200_6735_dsi_video/rm68200_6735_dsi_video.c
+++ b/drivers/misc/mediatek/lcm/rm68200_6735_dsi_video/rm68200_6735_dsi_video.c
@@ -80,7 +80,7 @@
 #endif
 #include "lcm_drv.h"
 
-#define test "rm68200 ver0.2"
+#define test "rm68200 ver0.3"
 
 #if defined(BUILD_LK)
 #else
@@ -97,8 +97,8 @@
 #define FRAME_HEIGHT 										(1280)
 #define LCM_ID                       						(0x1284)
 
-#define REGFLAG_DELAY             							(0XFFFE)
-#define REGFLAG_END_OF_TABLE      							(0xF100)	// END OF REGISTERS MARKER
+#define REGFLAG_DELAY             							(0XEE)
+#define REGFLAG_END_OF_TABLE      							(0xDD00)	// END OF REGISTERS MARKER
 
 
 #define LCM_DSI_CMD_MODE									0
@@ -177,540 +177,309 @@ Date: 20140819
 
 
 {0xFE, 1,{0x01}},
+{0x24, 1,{0xC0}},
+{0x25, 1,{0x53}},
+{0x26, 1,{0x00}},
 
-{0x00, 1,{0x0A}},
-
-{0x01, 1,{0x08}},
-
-{0x2B, 1,{0xC5}},
-
+{0x27, 1,{0x0A}},
+{0x29, 1,{0x0A}},
+{0x2B, 1,{0xE5}},
 {0x16, 1,{0x52}},
 
-{0x27, 1,{0x0C}},
-
-{0x29, 1,{0x0C}},
-
-{0x2F, 1,{0x6A}},
-
-{0x34, 1,{0x55}},
-
+{0x2F, 1,{0x5C}},
+{0x34, 1,{0x57}},
 {0x1B, 1,{0x00}},
-
 {0x12, 1,{0x08}},
 
 {0x1A, 1,{0x06}},
-
-{0x46, 1,{0x5A}},
-
-{0x52, 1,{0x95}},
-
+{0x46, 1,{0x76}},
+{0x52, 1,{0x88}},
 {0x53, 1,{0x00}},
 
-{0x54, 1,{0x95}},
-
+{0x54, 1,{0x88}},
 {0x55, 1,{0x00}},
-
-
 {0xFE, 1,{0x03}},
+{0x00, 1,{0x03}},
 
-{0x00, 1,{0x05}},
-
-{0x01, 1,{0x16}},
-
-{0x02, 1,{0x01}},
-
-{0x03, 1,{0x04}},
-
+{0x01, 1,{0x14}},
+{0x02, 1,{0x03}},
+{0x01, 1,{0x00}},
 {0x04, 1,{0x00}},
 
-{0x05, 1,{0x00}},
-
-{0x06, 1,{0x50}},
-
-{0x07, 1,{0x05}},
-
-{0x08, 1,{0x16}},
-
-{0x09, 1,{0x01}},
-
-{0x0A, 1,{0x08}},
+{0x06, 1,{0x00}},
+{0x07, 1,{0x00}},
+{0x08, 1,{0x00}},
+{0x09, 1,{0x00}},
 
+{0x0A, 1,{0x01}},
 {0x0B, 1,{0x00}},
-
 {0x0C, 1,{0x00}},
+{0x0D, 1,{0x00}},
 
-{0x0D, 1,{0x50}},
-
-{0x0E, 1,{0x03}},
-
-{0x0F, 1,{0x04}},
-
-{0x10, 1,{0x05}},
-
-{0x11, 1,{0x06}},
+{0x0E, 1,{0x05}},
+{0x0F, 1,{0x06}},
+{0x10, 1,{0x07}},
+{0x11, 1,{0x08}},
 
 {0x12, 1,{0x00}},
-
-{0x13, 1,{0x40}},
-
+{0x13, 1,{0x00}},
 {0x14, 1,{0x00}},
+{0x16, 1,{0x08}},
 
-{0x15, 1,{0xC5}},
-
-{0x16, 1,{0x0C}},
-
-{0x17, 1,{0x07}},
-
-{0x18, 1,{0x08}},
-
-{0x19, 1,{0x09}},
-
-{0x1A, 1,{0x0A}},
+{0x17, 1,{0x09}},
+{0x18, 1,{0x0A}},
+{0x19, 1,{0x0B}},
+{0x1A, 1,{0x0C}},
 
 {0x1B, 1,{0x00}},
-
-{0x1C, 1,{0x40}},
-
+{0x1C, 1,{0x00}},
 {0x1D, 1,{0x00}},
+{0x1E, 1,{0x83}},
 
-{0x1E, 1,{0x85}},
-
-{0x1F, 1,{0x0C}},
-
+{0x1F, 1,{0x08}},
 {0x20, 1,{0x00}},
-
 {0x21, 1,{0x00}},
+{0x22, 1,{0x05}},
 
-{0x22, 1,{0x03}},
-
-{0x23, 1,{0x0A}},
-
-{0x24, 1,{0x0C}},
+{0x23, 1,{0x12}},
+{0x24, 1,{0x00}},
+{0x25, 1,{0x28}},
 
-{0x25, 1,{0x2D}},
 
 {0x26, 1,{0x00}},
-
-{0x27, 1,{0x0E}},
-
-{0x28, 1,{0x10}},
-
-{0x29, 1,{0x2D}},
-
-{0x2A, 1,{0x0B}},
-
-{0x2B, 1,{0x0C}},
-
-{0x2D, 1,{0x0D}},
-
-{0x2F, 1,{0x0E}},
-
+{0x27, 1,{0x16}},
+{0x28, 1,{0x00}},
+{0x29, 1,{0x28}},
+
+{0x1A, 1,{0x00}},
+{0x2B, 1,{0x00}},
+{0x2D, 1,{0x00}},
+{0x2F, 1,{0x00}},
 {0x30, 1,{0x00}},
-
-{0x31, 1,{0x40}},
-
-{0x32, 1,{0x05}},
-
-{0x33, 1,{0x0C}},
-
-{0x34, 1,{0x40}},
-
+{0x31, 1,{0x00}},
+{0x32, 1,{0x00}},
+{0x33, 1,{0x00}},
+{0x34, 1,{0x00}},
 {0x35, 1,{0x00}},
-
 {0x36, 1,{0x00}},
-
 {0x37, 1,{0x00}},
-
 {0x38, 1,{0x00}},
-
 {0x39, 1,{0x00}},
-
 {0x3A, 1,{0x00}},
-
-{0x3B, 1,{0x00}},
-
-{0x3D, 1,{0x00}},
-
-{0x3F, 1,{0x00}},
-
-{0x40, 1,{0x00}},
-
+{0x3B, 1,{0x01}},
+{0x3D, 1,{0x01}},
+{0x3F, 1,{0x01}},
 {0x41, 1,{0x00}},
-
 {0x42, 1,{0x00}},
-
 {0x43, 1,{0x00}},
-
 {0x44, 1,{0x00}},
-
 {0x45, 1,{0x00}},
-
 {0x46, 1,{0x00}},
-
 {0x47, 1,{0x00}},
-
 {0x48, 1,{0x00}},
-
 {0x49, 1,{0x00}},
-
 {0x4A, 1,{0x00}},
-
 {0x4B, 1,{0x00}},
-
 {0x4C, 1,{0x00}},
-
 {0x4D, 1,{0x00}},
-
 {0x4E, 1,{0x00}},
-
 {0x4F, 1,{0x00}},
-
 {0x50, 1,{0x00}},
-
 {0x51, 1,{0x00}},
-
 {0x52, 1,{0x00}},
-
-{0x53, 1,{0x00}},
-
 {0x54, 1,{0x00}},
-
+{0x53, 1,{0x00}},
 {0x55, 1,{0x00}},
-
 {0x56, 1,{0x00}},
-
 {0x58, 1,{0x00}},
-
 {0x59, 1,{0x00}},
-
 {0x5A, 1,{0x00}},
-
 {0x5B, 1,{0x00}},
-
 {0x5C, 1,{0x00}},
-
 {0x5D, 1,{0x00}},
-
 {0x5E, 1,{0x00}},
-
 {0x5F, 1,{0x00}},
 
-{0x60, 1,{0x0B}},
+{0x60, 1,{0x00}},
 
 {0x61, 1,{0x00}},
 
-{0x62, 1,{0x80}},
+{0x62, 1,{0x00}},
 
-{0x63, 1,{0x12}},
-
-{0x64, 1,{0x14}},
+{0x63, 1,{0x00}},
 
+{0x64, 1,{0x00}},
 {0x65, 1,{0x00}},
-
 {0x66, 1,{0x00}},
 
-{0x67, 1,{0x55}},
+
+{0x67, 1,{0x00}},
 
 {0x68, 1,{0x00}},
 
 {0x69, 1,{0x00}},
 
 {0x6A, 1,{0x00}},
-
 {0x6B, 1,{0x00}},
-
 {0x6C, 1,{0x00}},
-
-{0x6D, 1,{0xBC}},
-
-{0x6E, 1,{0x00}},
-
+{0x6D, 1,{0x88}},
+{0x6E, 1,{0x53}},
 {0x6F, 1,{0x00}},
-
 {0x70, 1,{0x00}},
-
-{0x71, 1,{0x80}},
-
+{0x71, 1,{0x22}},
 {0x72, 1,{0x00}},
-
 {0x73, 1,{0x00}},
-
 {0x74, 1,{0x01}},
-
 {0x75, 1,{0x01}},
-
 {0x76, 1,{0x01}},
-
 {0x77, 1,{0x01}},
-
 {0x78, 1,{0x01}},
-
-{0x79, 1,{0x01}},
-
 {0x7A, 1,{0x00}},
-
 {0x7B, 1,{0x00}},
-
-{0x7C, 1,{0x00}},
-
-{0x7D, 1,{0x00}},
-
-{0x7E, 1,{0x18}},
-
-{0x7F, 1,{0x19}},
-
-{0x80, 1,{0x09}},
-
-{0x81, 1,{0x0B}},
-
-{0x82, 1,{0x0D}},
-
-{0x83, 1,{0x0F}},
-
-{0x84, 1,{0x11}},
-
-{0x85, 1,{0x13}},
-
-{0x86, 1,{0x03}},
-
+{0x7C, 1,{0x4A}},
+{0x7D, 1,{0x80}},
+{0x7E, 1,{0x8F}},
+{0x7F, 1,{0x0D}},
+{0x80, 1,{0x0B}},
+{0x81, 1,{0x09}},
+{0x82, 1,{0x01}},
+{0x83, 1,{0x3F}},
+{0x84, 1,{0x3F}},
+{0x85, 1,{0x3F}},
+{0x86, 1,{0x3F}},
 {0x87, 1,{0x3F}},
-
-{0x88, 1,{0x07}},
-
+{0x88, 1,{0x3F}},
 {0x89, 1,{0x3F}},
-
-{0x8A, 1,{0x1C}},
-
+{0x8A, 1,{0x3F}},
 {0x8B, 1,{0x3F}},
-
 {0x8C, 1,{0x3F}},
-
-{0x8D, 1,{0x1C}},
-
-{0x8E, 1,{0x1C}},
-
-{0x8F, 1,{0x1C}},
-
-{0x90, 1,{0x3F}},
-
-{0x91, 1,{0x01}},
-
+{0x8D, 1,{0x3F}},
+{0x8E, 1,{0x3F}},
+{0x8F, 1,{0x3F}},
+{0x90, 1,{0x18}},
+{0x91, 1,{0x19}},
 {0x92, 1,{0x3F}},
-
 {0x93, 1,{0x3F}},
-
 {0x94, 1,{0x3F}},
-
 {0x95, 1,{0x3F}},
-
-{0x96, 1,{0x00}},
-
-{0x97, 1,{0x3F}},
-
-{0x98, 1,{0x1C}},
-
-{0x99, 1,{0x1C}},
-
-{0x9A, 1,{0x1C}},
-
+{0x96, 1,{0x1B}},
+{0x97, 1,{0x1A}},
+{0x98, 1,{0x3F}},
+{0x99, 1,{0x3F}},
+{0x9A, 1,{0x3F}},
 {0x9B, 1,{0x3F}},
-
 {0x9C, 1,{0x3F}},
-
-{0x9D, 1,{0x1C}},
+{0x9D, 1,{0x3F}},
 
 {0x9E, 1,{0x3F}},
-
-{0x9F, 1,{0x06}},
-
+{0x9F, 1,{0x3F}},
 {0xA0, 1,{0x3F}},
-
-{0xA2, 1,{0x02}},
-
-{0xA3, 1,{0x12}},
-
-{0xA4, 1,{0x10}},
-
-{0xA5, 1,{0x0E}},
-
-{0xA6, 1,{0x0C}},
-
-{0xA7, 1,{0x0A}},
-
-{0xA9, 1,{0x08}},
-
-{0xAA, 1,{0x19}},
-
-{0xAB, 1,{0x18}},
-
-{0xAC, 1,{0x18}},
-
-{0xAD, 1,{0x19}},
-
-{0xAE, 1,{0x12}},
-
-{0xAF, 1,{0x10}},
-
-{0xB0, 1,{0x0E}},
-
-{0xB1, 1,{0x0C}},
-
-{0xB2, 1,{0x0A}},
-
-{0xB3, 1,{0x08}},
-
-{0xB4, 1,{0x00}},
-
+{0xA2, 1,{0x3F}},
+{0xA3, 1,{0x3F}},
+{0xA4, 1,{0x3F}},
+{0xA5, 1,{0x3F}},
+{0xA6, 1,{0x00}},
+{0xA7, 1,{0x08}},
+{0xA9, 1,{0x0A}},
+{0xAA, 1,{0x0C}},
+{0xAB, 1,{0x0E}},
+{0xAC, 1,{0x0C}},
+{0xAD, 1,{0x0E}},
+{0xAE, 1,{0x08}},
+{0xAF, 1,{0x0A}},
+{0xB0, 1,{0x3F}},
+{0xB1, 1,{0x00}},
+{0xB2, 1,{0x3F}},
+{0xB3, 1,{0x3F}},
+{0xB4, 1,{0x3F}},
 {0xB5, 1,{0x3F}},
-
-{0xB6, 1,{0x06}},
-
+{0xB6, 1,{0x3F}},
 {0xB7, 1,{0x3F}},
-
-{0xB8, 1,{0x1C}},
-
+{0xB8, 1,{0x3F}},
 {0xB9, 1,{0x3F}},
-
 {0xBA, 1,{0x3F}},
-
-{0xBB, 1,{0x1C}},
-
-{0xBC, 1,{0x1C}},
-
-{0xBD, 1,{0x1C}},
-
-{0xBE, 1,{0x3F}},
-
-{0xBF, 1,{0x02}},
-
+{0xBB, 1,{0x3F}},
+{0xBC, 1,{0x3F}},
+{0xBD, 1,{0x3F}},
+{0xBE, 1,{0x18}},
+{0xBF, 1,{0x19}},
 {0xC0, 1,{0x3F}},
-
 {0xC1, 1,{0x3F}},
-
 {0xC2, 1,{0x3F}},
-
 {0xC3, 1,{0x3F}},
-
-{0xC4, 1,{0x03}},
-
-{0xC5, 1,{0x3F}},
-
-{0xC6, 1,{0x1C}},
-
-{0xC7, 1,{0x1C}},
-
-{0xC8, 1,{0x1C}},
-
+{0xC4, 1,{0x1B}},
+{0xC5, 1,{0x1A}},
+{0xC6, 1,{0x3F}},
+{0xC7, 1,{0x3F}},
+{0xC8, 1,{0x3F}},
 {0xC9, 1,{0x3F}},
-
 {0xCA, 1,{0x3F}},
-
-{0xCB, 1,{0x1C}},
-
+{0xCB, 1,{0x3F}},
 {0xCC, 1,{0x3F}},
-
-{0xCD, 1,{0x07}},
-
+{0xCD, 1,{0x3F}},
 {0xCE, 1,{0x3F}},
-
-{0xCF, 1,{0x01}},
-
-{0xD0, 1,{0x09}},
-
-{0xD1, 1,{0x0B}},
-
-{0xD2, 1,{0x0D}},
-
-{0xD3, 1,{0x0F}},
-
-{0xD4, 1,{0x11}},
-
-{0xD5, 1,{0x13}},
-
-{0xD6, 1,{0x19}},
-
-{0xD7, 1,{0x18}},
-
-{0xDF, 1,{0x00}},
-
+{0xCF, 1,{0x3F}},
+{0xD0, 1,{0x3F}},
+{0xD1, 1,{0x3F}},
+{0xD2, 1,{0x01}},
+{0xD3, 1,{0x3F}},
+{0xD4, 1,{0x0B}},
+{0xD5, 1,{0x09}},
+{0xD6, 1,{0x0F}},
+{0xD7, 1,{0x0D}},
+{0xDC, 1,{0x02}},
+{0xDE, 1,{0x0C}},
+{0xFE, 1,{0x0E}},
+{0x01, 1,{0x75}},
 {0xFE, 1,{0x04}},
-
 {0x60, 1,{0x00}},
-
-{0x61, 1,{0x10}},
-
-{0x62, 1,{0x16}},
-
-{0x63, 1,{0x0F}},
-
+{0x61, 1,{0x15}},
+{0x62, 1,{0x1A}},
+{0x63, 1,{0x0D}},
 {0x64, 1,{0x06}},
-
-{0x65, 1,{0x13}},
-
-{0x66, 1,{0x0F}},
-
-{0x67, 1,{0x0B}},
-
+{0x65, 1,{0x12}},
+{0x66, 1,{0x0E}},
+{0x67, 1,{0x0A}},
 {0x68, 1,{0x16}},
-
-{0x69, 1,{0x0C}},
-
+{0x69, 1,{0x0B}},
 {0x6A, 1,{0x10}},
-
-{0x6B, 1,{0x07}},
-
-{0x6C, 1,{0x0F}},
-
-{0x6D, 1,{0x15}},
-
-{0x6E, 1,{0x0F}},
-
+{0x6B, 1,{0x08}},
+{0x6C, 1,{0x11}},
+{0x6D, 1,{0x13}},
+{0x6E, 1,{0x0E}},
 {0x6F, 1,{0x00}},
-
 {0x70, 1,{0x00}},
-
-{0x71, 1,{0x10}},
-
-{0x72, 1,{0x16}},
-
-{0x73, 1,{0x0F}},
-
+{0x71, 1,{0x15}},
+{0x72, 1,{0x1A}},
+{0x73, 1,{0x0D}},
 {0x74, 1,{0x06}},
-
-{0x75, 1,{0x13}},
-
-{0x76, 1,{0x0F}},
-
-{0x77, 1,{0x0B}},
-
+{0x75, 1,{0x12}},
+{0x76, 1,{0x0E}},
+{0x77, 1,{0x0A}},
 {0x78, 1,{0x16}},
-
-{0x79, 1,{0x0C}},
-
+{0x79, 1,{0x0B}},
 {0x7A, 1,{0x10}},
+{0x7B, 1,{0x08}},
+{0x7C, 1,{0x11}},
+{0x7D, 1,{0x13}},
+{0x7E, 1,{0x0E}},
+{0xFE, 1,{0x0B}},
+{0x21, 1,{0x50}},
+{0xFE, 1,{0x00}},
+{0x58, 1,{0xA9}},
 
-{0x7B, 1,{0x07}},
-
-{0x7C, 1,{0x0F}},
-
-{0x7D, 1,{0x15}},
-
-{0x7E, 1,{0x0F}},
-
-{0x7F, 1,{0x00}},
 
-{0xFE, 1,{0x00}},
 
-{0x58, 1,{0xA9}},
 
 {REGFLAG_DELAY, 120, {}},
 
 {0x11, 0,{0x00}},
 
-{REGFLAG_DELAY, 100, {}},
+{REGFLAG_DELAY, 200, {}},
 
 {0x29, 0,{0x00}},
-{REGFLAG_DELAY, 100, {}},
+{0x35, 0,{0x00}},
+{REGFLAG_DELAY, 200, {}},
 
 {REGFLAG_END_OF_TABLE, 0x00, {}}
 };
@@ -796,7 +565,7 @@ static void lcm_get_params(LCM_PARAMS * params)
 	params->dbi.te_edge_polarity = LCM_POLARITY_RISING;
 
 
-	params->dsi.mode   = 1
+	params->dsi.mode   = 1;
 
 
 	// DSI
diff --git a/include/generated/compile.h b/include/generated/compile.h
index 59e62c9..88a8b58 100644
--- a/include/generated/compile.h
+++ b/include/generated/compile.h
@@ -1,7 +1,7 @@
-/* This file is auto generated, version 4 */
+/* This file is auto generated, version 5 */
 /* SMP PREEMPT */
 #define UTS_MACHINE "arm64"
-#define UTS_VERSION "#4 SMP PREEMPT Mon May 9 20:37:46 MSK 2016"
+#define UTS_VERSION "#5 SMP PREEMPT Mon May 9 21:16:04 MSK 2016"
 #define LINUX_COMPILE_BY "olegsvs"
 #define LINUX_COMPILE_HOST "olegsvs-develop"
 #define LINUX_COMPILER "gcc version 4.9 20150123 (prerelease) (GCC) "
-- 
2.7.4

