From eefaf2541af48aeaeeaded9f7ff5b04de6f55212 Mon Sep 17 00:00:00 2001
From: Levin Calado <levincalado@gmail.com>
Date: Sun, 5 Jul 2015 15:37:10 +0800
Subject: [PATCH 0620/1168] fs: fix commit 9eae8ac6 based off d0ff694

Signed-off-by: Levin Calado <levincalado@gmail.com>
Signed-off-by: Stefan Guendhoer <stefan@guendhoer.com>

Former-commit-id: 7ab7bc3ee6d096eae787191816b19f5db53a1b8e
---
 fs/exec.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/fs/exec.c b/fs/exec.c
index 8500ffa..5496531 100644
--- a/fs/exec.c
+++ b/fs/exec.c
@@ -1279,7 +1279,7 @@ static void bprm_fill_uid(struct linux_binprm *bprm)
 	if (bprm->file->f_path.mnt->mnt_flags & MNT_NOSUID)
 		return;
 
-	if (current->no_new_privs)
+	if (task_no_new_privs(current))
 		return;
 
 	inode = file_inode(bprm->file);
-- 
2.7.4

