From 4c4de55955e49bd7c58aa087f676ad7af666c116 Mon Sep 17 00:00:00 2001
From: olegsvs <oleg.texet@gmail.com>
Date: Wed, 11 May 2016 01:22:31 +0300
Subject: [PATCH 1105/1168] test button_backlight + vibration

---
 drivers/input/touchscreen/mediatek/GT915_HD/gt9xx_driver.c     |  3 ++-
 drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h | 10 +++++-----
 .../mediatek/mach/mt6735/benefit_m7/leds/mt65xx/cust_leds.c    |  2 +-
 include/config/auto.conf                                       |  4 ++--
 include/config/kernel.release                                  |  2 +-
 include/generated/autoconf.h                                   |  4 ++--
 include/generated/compile.h                                    |  4 ++--
 include/generated/utsrelease.h                                 |  2 +-
 8 files changed, 16 insertions(+), 15 deletions(-)

diff --git a/drivers/input/touchscreen/mediatek/GT915_HD/gt9xx_driver.c b/drivers/input/touchscreen/mediatek/GT915_HD/gt9xx_driver.c
index 2a94f8f..387ba64 100755
--- a/drivers/input/touchscreen/mediatek/GT915_HD/gt9xx_driver.c
+++ b/drivers/input/touchscreen/mediatek/GT915_HD/gt9xx_driver.c
@@ -97,7 +97,7 @@ static DECLARE_WAIT_QUEUE_HEAD(waiter);
 
 #ifdef TPD_HAVE_BUTTON
 static int tpd_keys_local[TPD_KEY_COUNT] = TPD_KEYS;
-static int tpd_keys_dim_local[TPD_KEY_COUNT][4] = TPD_KEYS_DIM;
+static int tpd_keys_dim_local[TPD_KEY_COUNT][3] = TPD_KEYS_DIM;
 #endif
 
 #if GTP_GESTURE_WAKEUP
@@ -2715,6 +2715,7 @@ static int touch_event_handler(void *unused)
                 for (i = 0; i < GTP_MAX_KEY_NUM; i++)
                 {
                     input_report_key(tpd->dev, touch_key_array[i], key_value & (0x01 << i));
+
                 }
                 touch_num = 0;  // shiled fingers
             }
diff --git a/drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h b/drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h
index b90283d..79092f8 100755
--- a/drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h
+++ b/drivers/input/touchscreen/mediatek/GT915_HD/tpd_custom_gt9xx.h
@@ -126,7 +126,7 @@ extern s32 gtp_i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf
 #define GTP_COMPATIBLE_MODE   0       // compatible with GT9XXF
 
 #define GTP_CREATE_WR_NODE    1
-#define GTP_ESD_PROTECT       0       // esd protection with a cycle of 2 seconds
+#define GTP_ESD_PROTECT       1       // esd protection with a cycle of 2 seconds
 #define GTP_CHARGER_SWITCH    0       // charger plugin & plugout detect
 
 #define GTP_WITH_PEN          0      
@@ -134,11 +134,11 @@ extern s32 gtp_i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf
 
 #define GTP_GESTURE_WAKEUP    0 
 
-#define TPD_PROXIMITY
-//#define TPD_HAVE_BUTTON       1      // report key as coordinate,Vibration feedback
+//#define TPD_PROXIMITY
+#define TPD_HAVE_BUTTON            // report key as coordinate,Vibration feedback
 //#define TPD_WARP_X                  // mirrored x coordinate
 //#define TPD_WARP_Y                  // mirrored y coordinate
-#define GTP_DEBUG_ON          1
+#define GTP_DEBUG_ON          0
 #define GTP_DEBUG_ARRAY_ON    0
 #define GTP_DEBUG_FUNC_ON     0
 
@@ -279,7 +279,7 @@ extern s32 gtp_i2c_read_dbl_check(struct i2c_client *client, u16 addr, u8 *rxbuf
 
 //STEP_4(optional):If this project have touch key,Set touch key config.                                    
 #if GTP_HAVE_TOUCH_KEY
-    #define GTP_KEY_TAB  {KEY_MENU, KEY_HOMEPAGE, KEY_BACK,}
+    #define GTP_KEY_TAB  {KEY_MENU, KEY_HOMEPAGE, KEY_BACK}
 #endif
 
 //***************************PART3:OTHER define*********************************
diff --git a/drivers/misc/mediatek/mach/mt6735/benefit_m7/leds/mt65xx/cust_leds.c b/drivers/misc/mediatek/mach/mt6735/benefit_m7/leds/mt65xx/cust_leds.c
index 468e574..9d654d3 100755
--- a/drivers/misc/mediatek/mach/mt6735/benefit_m7/leds/mt65xx/cust_leds.c
+++ b/drivers/misc/mediatek/mach/mt6735/benefit_m7/leds/mt65xx/cust_leds.c
@@ -192,7 +192,7 @@ static struct cust_mt65xx_led cust_led_list[MT65XX_LED_TYPE_TOTAL] = {
 	{"blue",              MT65XX_LED_MODE_NONE, -1,{0}},
 	{"jogball-backlight", MT65XX_LED_MODE_NONE, -1,{0}},
 	{"keyboard-backlight",MT65XX_LED_MODE_NONE, -1,{0}},
-	{"button-backlight",  MT65XX_LED_MODE_NONE, -1,{0}},
+	{"button-backlight",  MT65XX_LED_MODE_PMIC, MT65XX_LED_PMIC_NLED_ISINK0,{0}},
 	//{"lcd-backlight",     MT65XX_LED_MODE_GPIO, GPIO_LCM_PWR,{0}},
 {"lcd-backlight", MT65XX_LED_MODE_GPIO, (long)one_line_pulse_set_backlight,{0}},
 };
diff --git a/include/config/auto.conf b/include/config/auto.conf
index 630b6d9..1b29181 100644
--- a/include/config/auto.conf
+++ b/include/config/auto.conf
@@ -240,7 +240,6 @@ CONFIG_ANDROID_LOW_MEMORY_KILLER_AUTODETECT_OOM_ADJ_VALUES=y
 CONFIG_INET_IPCOMP=y
 CONFIG_OF_NET=y
 CONFIG_ARM_ARCH_TIMER=y
-CONFIG_MTK_EPL2182_NEW=y
 CONFIG_EVENT_TRACING=y
 CONFIG_HID_CYPRESS=y
 CONFIG_ARCH_WANT_OPTIONAL_GPIOLIB=y
@@ -441,6 +440,7 @@ CONFIG_SND_HWDEP=y
 CONFIG_PANIC_ON_OOPS=y
 CONFIG_BLK_DEV_LOOP=y
 CONFIG_WAKELOCK=y
+CONFIG_MTK_STK3X1X_DRIVER=y
 CONFIG_INPUT_MISC=y
 CONFIG_SND_COMPRESS_OFFLOAD=y
 CONFIG_CUSTOM_KERNEL_ACTIVITY_SENSOR=""
@@ -632,7 +632,7 @@ CONFIG_CRYPTO_CRYPTD=y
 CONFIG_BACKWARD_COMPATIBLE=y
 CONFIG_DEBUG_KERNEL=y
 CONFIG_COMPAT_BRK=y
-CONFIG_LOCALVERSION="-oleg.svs-Benefit-M7-v0.7-B"
+CONFIG_LOCALVERSION="-oleg.svs-Benefit-M7-v0.7-A"
 CONFIG_CRYPTO=y
 CONFIG_USB_TRANCEVIBRATOR=y
 CONFIG_DEFAULT_MMAP_MIN_ADDR=4096
diff --git a/include/config/kernel.release b/include/config/kernel.release
index 81ec87e..daeb701 100644
--- a/include/config/kernel.release
+++ b/include/config/kernel.release
@@ -1 +1 @@
-3.10.101-oleg.svs-Benefit-M7-v0.7-B
+3.10.101-oleg.svs-Benefit-M7-v0.7-A
diff --git a/include/generated/autoconf.h b/include/generated/autoconf.h
index c2d0b9a..14bc17f 100644
--- a/include/generated/autoconf.h
+++ b/include/generated/autoconf.h
@@ -242,7 +242,6 @@
 #define CONFIG_INET_IPCOMP 1
 #define CONFIG_OF_NET 1
 #define CONFIG_ARM_ARCH_TIMER 1
-#define CONFIG_MTK_EPL2182_NEW 1
 #define CONFIG_EVENT_TRACING 1
 #define CONFIG_HID_CYPRESS 1
 #define CONFIG_ARCH_WANT_OPTIONAL_GPIOLIB 1
@@ -443,6 +442,7 @@
 #define CONFIG_PANIC_ON_OOPS 1
 #define CONFIG_BLK_DEV_LOOP 1
 #define CONFIG_WAKELOCK 1
+#define CONFIG_MTK_STK3X1X_DRIVER 1
 #define CONFIG_INPUT_MISC 1
 #define CONFIG_SND_COMPRESS_OFFLOAD 1
 #define CONFIG_CUSTOM_KERNEL_ACTIVITY_SENSOR ""
@@ -634,7 +634,7 @@
 #define CONFIG_BACKWARD_COMPATIBLE 1
 #define CONFIG_DEBUG_KERNEL 1
 #define CONFIG_COMPAT_BRK 1
-#define CONFIG_LOCALVERSION "-oleg.svs-Benefit-M7-v0.7-B"
+#define CONFIG_LOCALVERSION "-oleg.svs-Benefit-M7-v0.7-A"
 #define CONFIG_CRYPTO 1
 #define CONFIG_USB_TRANCEVIBRATOR 1
 #define CONFIG_DEFAULT_MMAP_MIN_ADDR 4096
diff --git a/include/generated/compile.h b/include/generated/compile.h
index 0492a78..c3721a9 100644
--- a/include/generated/compile.h
+++ b/include/generated/compile.h
@@ -1,7 +1,7 @@
-/* This file is auto generated, version 35 */
+/* This file is auto generated, version 37 */
 /* SMP PREEMPT */
 #define UTS_MACHINE "arm64"
-#define UTS_VERSION "#35 SMP PREEMPT Wed May 11 00:23:38 MSK 2016"
+#define UTS_VERSION "#37 SMP PREEMPT Wed May 11 00:31:27 MSK 2016"
 #define LINUX_COMPILE_BY "olegsvs"
 #define LINUX_COMPILE_HOST "olegsvs-develop"
 #define LINUX_COMPILER "gcc version 4.9 20150123 (prerelease) (GCC) "
diff --git a/include/generated/utsrelease.h b/include/generated/utsrelease.h
index d5c4306..e52b0d7 100644
--- a/include/generated/utsrelease.h
+++ b/include/generated/utsrelease.h
@@ -1 +1 @@
-#define UTS_RELEASE "3.10.101-oleg.svs-Benefit-M7-v0.7-B"
+#define UTS_RELEASE "3.10.101-oleg.svs-Benefit-M7-v0.7-A"
-- 
2.7.4

